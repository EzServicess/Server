<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Dev Panel</title>
    <style>
        body { font-family: Arial, sans-serif; background: #101820; color: white; text-align: center; }
        input { padding: 10px; margin: 5px; }
        button { padding: 10px; background: #1e90ff; color: white; border: none; cursor: pointer; }
        button:hover { background: #0077cc; }
    </style>
</head>
<body>

<h1>Dev Panel - Create License</h1>

<input id="licenseKey" placeholder="License"><br>
<input id="licenseDuration" placeholder="Duration (days, e.g., 7, 30)"><br>
<button onclick="createLicense()">Create License</button>

<script>
const SUPABASE_URL = "https://wfdsdjqymxsvciyefnhq.supabase.co";
const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndmZHNkanF5bXhzdmNpeWVmbmhxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUxNTczMTcsImV4cCI6MjA3MDczMzMxN30.LHU8VueqF-iuLQutghLRf4SItBywRZent3ah_mMN944";

function addDays(date, days) {
    const result = new Date(date);
    result.setDate(result.getDate() + days);
    return result.toISOString();
}

async function createLicense() {
    const licenseKey = document.getElementById("licenseKey").value.trim();
    const duration = parseInt(document.getElementById("licenseDuration").value.trim());
    if (!licenseKey || !duration) return alert("Fill in all fields");

    const expires_at = addDays(new Date(), duration);

    const res = await fetch(`${SUPABASE_URL}/rest/v1/users`, {
        method: "POST",
        headers: {
            "apikey": SUPABASE_KEY,
            "Authorization": `Bearer ${SUPABASE_KEY}`,
            "Content-Type": "application/json",
            "Prefer": "return=minimal"
        },
        body: JSON.stringify({ license: licenseKey, expires_at })
    });

    if (res.ok) alert(`License created: ${licenseKey} (expires in ${duration} days)`);
    else alert("Error creating license");
}
</script>

</body>
</html>
